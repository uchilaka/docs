(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{250:function(t,a,s){"use strict";s.r(a);var n={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=s(6),o=Object(e.a)(n,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[s("h1",{attrs:{id:"data-access"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data-access","aria-hidden":"true"}},[t._v("#")]),t._v(" Data Access")]),t._v(" "),s("p",[t._v("Directus uses Zend DB to access data from the database. It has its own class "),s("code",[t._v("Directus\\Database\\TableGateway\\RelationalTableGateway")]),t._v(" extending "),s("code",[t._v("Zend\\Db\\TableGateway\\TableGateway")]),t._v(" to add some Directus logic.")]),t._v(" "),s("p",[t._v("You can use anything you want to access the data from the database, you can use PDO or even "),s("code",[t._v("Zend\\Db\\TableGateway\\TableGateway")]),t._v(". The advantage of using the "),s("code",[t._v("Directus\\Database\\TableGateway\\RelationalTableGateway")]),t._v(" you will have the same api core data logic, such as fetching relational data and filters.")]),t._v(" "),s("h2",{attrs:{id:"fetching-data-within-hooks-and-endpoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetching-data-within-hooks-and-endpoints","aria-hidden":"true"}},[t._v("#")]),t._v(" Fetching Data within Hooks and Endpoints")]),t._v(" "),s("h3",{attrs:{id:"using-directus-tablegateway-factory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-directus-tablegateway-factory","aria-hidden":"true"}},[t._v("#")]),t._v(" Using Directus TableGateway Factory")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// Using the factory")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Directus"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("getContainer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'database'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$acl")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'acl'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Directus\\"),s("span",{attrs:{class:"token package"}},[t._v("Database"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TableGatewayFactory")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'COLLECTION_NAME'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// An Zend\\Db\\Adapter\\Adapter instance")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'connection'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// options are:")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//  false = no acl validation")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//  null = uses $container->get('acl')")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//  an Directus\\Permissions\\Acl instance")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'acl'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$acl")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("Directus\\Database\\TableGatewayFactory::create")]),t._v(" creates a "),s("code",[t._v("Directus\\Database\\TableGateway\\RelationalTableGateway")]),t._v(" unless there is a "),s("code",[t._v("CollectionNameTableGateway")]),t._v(" class in "),s("code",[t._v("Directus\\Database\\TableGatway")]),t._v(" namespace.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token variable"}},[t._v("$params")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$items")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("getItems")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$params")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Returns an array of items")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Example:")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// [")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//    'data' => [")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//        'id' => 1,")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//        'title' => 'Project title'")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//    ]")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// ];")]),t._v("\n")])])]),s("p",[t._v("For "),s("code",[t._v("params")]),t._v(" it can be used any "),s("a",{attrs:{href:"https://github.com/directus/docs/blob/master/api/reference.md#query-parameters",target:"_blank",rel:"noopener noreferrer"}},[t._v("Query Parameters"),s("OutboundLink")],1),t._v(" supported by the API.")]),t._v(" "),s("h3",{attrs:{id:"zend-db-tablegateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zend-db-tablegateway","aria-hidden":"true"}},[t._v("#")]),t._v(" Zend DB TableGateway")]),t._v(" "),s("p",[t._v("If you want to create your own custom queries using the Zend DB TableGateway gives you more flexibility, you can either use the TableGateway created by Directus TableGateway factory above, or create a instance of "),s("code",[t._v("Zend\\Db\\TableGateway\\TableGateway")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token variable"}},[t._v("$container")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Directus"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("getContainer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'database'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Zend"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Db"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TableGateway"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TableGateway")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Zend"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Db"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Sql"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Select")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("limit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("5")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("selectWith")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("valid")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("current")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("next")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("You can read the "),s("a",{attrs:{href:"https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Zend DB 2 Documentation"),s("OutboundLink")],1),t._v(" to know more about how to use Zend DB to select data.")]),t._v(" "),s("p",[t._v("All the Zend DB TableGateway methods are available to use such as "),s("a",{attrs:{href:"https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#join",target:"_blank",rel:"noopener noreferrer"}},[t._v("creating joins"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token variable"}},[t._v("$container")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Directus"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("getContainer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'database'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Zend"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Db"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TableGateway"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TableGateway")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$dbConnection")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Zend"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Db"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Sql"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Select")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("limit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("5")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("join")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_files'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// table name")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_files.id = directus_users.id'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// expression to join on (will be quoted by platform object before insertion),")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("array")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'filename'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// (optional) list of columns, same requirements as columns() above")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token constant"}},[t._v("JOIN_LEFT")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// (optional), one of inner, outer, left, right also represented by constants in the API")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$tableGateway")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("selectWith")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$select")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("valid")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("current")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$result")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("next")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"items-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#items-service","aria-hidden":"true"}},[t._v("#")]),t._v(" Items Service")]),t._v(" "),s("p",[t._v("This is the same class that the API uses behind the HTTP Layer.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token variable"}},[t._v("$container")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Directus"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("getContainer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$itemsService")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Directus"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Services"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ItemsService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$container")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token variable"}},[t._v("$params")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$items")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$itemsService")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("findAll")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$params")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token variable"}},[t._v("$item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$itemsService")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("find")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'directus_users'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$params")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"access-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#access-control","aria-hidden":"true"}},[t._v("#")]),t._v(" Access Control")]),t._v(" "),s("p",[t._v("Directus ACL helps you verify user privilege to access a collection.")]),t._v(" "),s("p",[t._v("Some of the ACL Methods are:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Acl::canCreate($collection, $status = null);\nAcl::canRead($collection, $status = null);\nAcl::canUpdate($collection, $status = null);\nAcl::canDelete($collection, $status = null);\n")])])]),s("p",[t._v("You can see all the methods in the "),s("a",{attrs:{href:"https://github.com/directus/api/blob/master/src/core/Directus/Permissions/Acl.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("Directus\\Permissions\\Acl"),s("OutboundLink")],1),t._v(" class.")]),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$container = \\Directus\\Application\\Application::getInstance()->getContainer();\n$acl = $container->get('acl');\n\nif ($acl->canRead('directus_users')) {\n    // read directus_users items\n}\n")])])])])},[],!1,null,null,null);o.options.__file="data.md";a.default=o.exports}}]);